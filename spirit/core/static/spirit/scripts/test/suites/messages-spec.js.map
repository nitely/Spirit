{"version":3,"sources":["messages-spec.coffee"],"names":[],"mappings":"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","file":"messages-spec.js","sourceRoot":"/source/","sourcesContent":["describe \"messages plugin tests\", ->\n  Messages = null\n\n  beforeEach ->\n    fixtures = jasmine.getFixtures()\n    fixtures.fixturesPath = 'base/test/fixtures/'\n    loadFixtures('messages.html')\n\n    # messages = $('.js-messages').messages()\n    Messages = $.fn.messages.Messages\n\n  it \"doesnt break selector chaining\", ->\n    messages = $('.js-messages-dummy').messages()\n    expect(messages).toEqual($('.js-messages-dummy'))\n    expect(messages.length).toEqual(2)\n\n  it \"does nothing when no hash\", ->\n    messages = $('.js-messages').messages()\n    expect(messages.hasClass('is-fixed')).toEqual(false)\n    expect($('.js-message-close').is(\":hidden\")).toEqual(true)\n\n  it \"places the messages when there is a hash\", ->\n    org_location_hash = window.location.hash\n    try\n      window.location.hash = \"#p1\"\n      messages = $('.js-messages').messages()\n      expect(messages.hasClass('is-fixed')).toEqual(true)\n    finally\n      window.location.hash = org_location_hash\n\n  it \"shows all the close buttons\", ->\n    org_location_hash = window.location.hash\n    try\n      window.location.hash = \"#p1\"\n      messages = $('.js-messages').messages()\n      expect($('.js-message-close').is(\":hidden\")).toEqual(false)\n    finally\n      window.location.hash = org_location_hash\n\n  it \"closes/hides the message\", ->\n    org_location_hash = window.location.hash\n    try\n      window.location.hash = \"#p1\"\n      messages = $('.js-messages').messages()\n      first_set = messages.find('.js-messages-set').first()\n      first_set.find('.js-message-close').first().trigger('click')\n      expect(first_set.find('.js-message').first().is(\":hidden\")).toEqual(true)\n      expect(first_set.find('.js-message').last().is(\":hidden\")).toEqual(false)\n      expect(messages.is(\":hidden\")).toEqual(false)\n    finally\n      window.location.hash = org_location_hash\n\n  it \"closes/hides the parent set when no more visible messages\", ->\n    org_location_hash = window.location.hash\n    try\n      window.location.hash = \"#p1\"\n      messages = $('.js-messages').messages()\n      first_set = messages.find('.js-messages-set').first()\n      first_set.find('.js-message-close').first().trigger('click')\n      first_set.find('.js-message-close').last().trigger('click')\n      expect(first_set.is(\":hidden\")).toEqual(true)\n      expect(messages.is(\":hidden\")).toEqual(false)\n    finally\n      window.location.hash = org_location_hash\n\n  it \"closes/hides the container when no more visible messages\", ->\n    org_location_hash = window.location.hash\n    try\n      window.location.hash = \"#p1\"\n      messages = $('.js-messages').messages()\n      messages.find('.js-message-close').trigger('click')\n      expect(messages.is(\":hidden\")).toEqual(true)\n      expect(messages.hasClass('is-fixed')).toEqual(false)\n    finally\n      window.location.hash = org_location_hash\n\n  it \"prevents the default click behaviour on close message\", ->\n    event = {type: 'click', stopPropagation: (->), preventDefault: (->)}\n    stopPropagation = spyOn event, 'stopPropagation'\n    preventDefault = spyOn event, 'preventDefault'\n\n    messages = $('.js-messages').messages()\n    messages.find('.js-message-close').first().trigger(event)\n    expect(stopPropagation).toHaveBeenCalled()\n    expect(preventDefault).toHaveBeenCalled()\n"]}