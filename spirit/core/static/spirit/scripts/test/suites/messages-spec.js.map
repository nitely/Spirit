{"version":3,"file":"messages-spec.js","sources":["messages-spec.coffee"],"names":[],"mappings":"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","sourcesContent":["describe \"messages plugin tests\", ->\n    Messages = null\n\n    beforeEach ->\n        fixtures = jasmine.getFixtures()\n        fixtures.fixturesPath = 'base/test/fixtures/'\n        loadFixtures('messages.html')\n\n        # messages = $('.js-messages').messages()\n        Messages = $.fn.messages.Messages\n\n    it \"doesnt break selector chaining\", ->\n        messages = $('.js-messages-dummy').messages()\n        expect(messages).toEqual($('.js-messages-dummy'))\n        expect(messages.length).toEqual(2)\n\n    it \"does nothing when no hash\", ->\n        messages = $('.js-messages').messages()\n        expect(messages.hasClass('is-fixed')).toEqual(false)\n        expect($('.js-messages-close').is(\":hidden\")).toEqual(true)\n\n    it \"places the messages when there is a hash\", ->\n        org_location_hash = window.location.hash\n        try\n            window.location.hash = \"#p1\"\n            messages = $('.js-messages').messages()\n            expect(messages.hasClass('is-fixed')).toEqual(true)\n        finally\n            window.location.hash = org_location_hash\n\n    it \"shows all the close buttons\", ->\n        org_location_hash = window.location.hash\n        try\n            window.location.hash = \"#p1\"\n            messages = $('.js-messages').messages()\n            expect($('.js-messages-close').is(\":hidden\")).toEqual(false)\n        finally\n            window.location.hash = org_location_hash\n\n    it \"closes/hides the message\", ->\n        org_location_hash = window.location.hash\n        try\n            window.location.hash = \"#p1\"\n            messages = $('.js-messages').messages()\n            first_set = messages.find('.js-messages-set').first()\n            first_set.find('.js-messages-close-button').trigger('click')\n            expect(first_set.is(\":hidden\")).toEqual(true)\n            expect(messages.is(\":hidden\")).toEqual(false)\n        finally\n            window.location.hash = org_location_hash\n\n    it \"closes/hides the container when no more visible messages\", ->\n        org_location_hash = window.location.hash\n        try\n            window.location.hash = \"#p1\"\n            messages = $('.js-messages').messages()\n            messages.find('.js-messages-close-button').trigger('click')\n            expect(messages.is(\":hidden\")).toEqual(true)\n            expect(messages.hasClass('is-fixed')).toEqual(false)\n        finally\n            window.location.hash = org_location_hash\n\n    it \"prevents the default click behaviour on close message\", ->\n        event = {type: 'click', stopPropagation: (->), preventDefault: (->)}\n        stopPropagation = spyOn event, 'stopPropagation'\n        preventDefault = spyOn event, 'preventDefault'\n\n        messages = $('.js-messages').messages()\n        messages.find('.js-messages-close-button').first().trigger(event)\n        expect(stopPropagation).toHaveBeenCalled()\n        expect(preventDefault).toHaveBeenCalled()\n"]}