{"version":3,"file":"postify-spec.js","sources":["postify-spec.coffee"],"names":[],"mappings":"AAAA;EAAA,QAAA,CAAS,sBAAT,EAAiC,SAAA;AAC7B,QAAA;IAAA,MAAA,GAAS;IACT,cAAA,GAAiB;IACjB,OAAA,GAAU;IAEV,UAAA,CAAW,SAAA;AACP,UAAA;MAAA,QAAA,GAAc,OAAO,CAAC,WAAX,CAAA;MACX,QAAQ,CAAC,YAAT,GAAwB;MACxB,YAAA,CAAa,cAAb;MAEA,MAAA,GAAS,CAAA,CAAE,WAAF,CAAc,CAAC,OAAf,CAAuB;QAAC,SAAA,EAAW,QAAZ;OAAvB;MACT,cAAA,GAAiB,MAAM,CAAC,KAAP,CAAA,CAAc,CAAC,IAAf,CAAoB,gBAApB;aACjB,OAAA,GAAU,CAAC,CAAC,EAAE,CAAC,OAAO,CAAC;IAPhB,CAAX;IASA,EAAA,CAAG,gCAAH,EAAqC,SAAA;MACjC,MAAA,CAAO,MAAP,CAAc,CAAC,OAAf,CAAuB,CAAA,CAAE,UAAF,CAAvB;aACA,MAAA,CAAO,MAAM,CAAC,MAAd,CAAqB,CAAC,OAAtB,CAA8B,CAA9B;IAFiC,CAArC;IAIA,EAAA,CAAG,+CAAH,EAAoD,SAAA;AAChD,UAAA;MAAA,KAAA,GAAQ;QAAC,IAAA,EAAM,OAAP;QAAgB,eAAA,EAAiB,CAAC,SAAA,GAAA,CAAD,CAAjC;QAAuC,cAAA,EAAgB,CAAC,SAAA,GAAA,CAAD,CAAvD;;MACR,eAAA,GAAkB,KAAA,CAAM,KAAN,EAAa,iBAAb;MAClB,cAAA,GAAiB,KAAA,CAAM,KAAN,EAAa,gBAAb;MAEjB,KAAA,CAAM,cAAN,EAAsB,YAAtB;MACA,CAAA,CAAE,UAAF,CAAa,CAAC,KAAd,CAAA,CAAqB,CAAC,OAAtB,CAA8B,KAA9B;MACA,MAAA,CAAO,eAAP,CAAuB,CAAC,gBAAxB,CAAA;aACA,MAAA,CAAO,cAAP,CAAsB,CAAC,gBAAvB,CAAA;IARgD,CAApD;WAUA,EAAA,CAAG,kBAAH,EAAuB,SAAA;AACnB,UAAA;MAAA,UAAA,GAAa,KAAA,CAAM,cAAN,EAAsB,YAAtB;MAEb,CAAA,CAAE,UAAF,CAAa,CAAC,KAAd,CAAA,CAAqB,CAAC,OAAtB,CAA8B,OAA9B;MACA,MAAA,CAAO,UAAP,CAAkB,CAAC,gBAAnB,CAAA;MACA,MAAA,CAAO,CAAA,CAAE,MAAF,CAAS,CAAC,IAAV,CAAA,CAAgB,CAAC,IAAjB,CAAsB,QAAtB,CAAP,CAAuC,CAAC,OAAxC,CAAgD,SAAhD;MACA,MAAA,CAAO,CAAA,CAAE,MAAF,CAAS,CAAC,IAAV,CAAA,CAAgB,CAAC,EAAjB,CAAoB,UAApB,CAAP,CAAsC,CAAC,OAAvC,CAA+C,KAA/C;aACA,MAAA,CAAO,CAAA,CAAE,iCAAF,CAAoC,CAAC,GAArC,CAAA,CAAP,CAAkD,CAAC,OAAnD,CAA2D,QAA3D;IAPmB,CAAvB;EA5B6B,CAAjC;AAAA","sourcesContent":["describe \"postify plugin tests\", ->\n    a_post = null\n    plugin_postify = null\n    Postify = null\n\n    beforeEach ->\n        fixtures = do jasmine.getFixtures\n        fixtures.fixturesPath = 'base/test/fixtures/'\n        loadFixtures 'postify.html'\n\n        a_post = $('a.js-post').postify {csrfToken: \"foobar\", }\n        plugin_postify = a_post.first().data 'plugin_postify'\n        Postify = $.fn.postify.Postify\n\n    it \"doesnt break selector chaining\", ->\n        expect(a_post).toEqual $('.js-post')\n        expect(a_post.length).toEqual 2\n\n    it \"prevents the default click behaviour on click\", ->\n        event = {type: 'click', stopPropagation: (->), preventDefault: (->)}\n        stopPropagation = spyOn event, 'stopPropagation'\n        preventDefault = spyOn event, 'preventDefault'\n\n        spyOn plugin_postify, 'formSubmit'\n        $(\".js-post\").first().trigger event\n        expect(stopPropagation).toHaveBeenCalled()\n        expect(preventDefault).toHaveBeenCalled()\n\n    it \"submits the form\", ->\n        formSubmit = spyOn plugin_postify, 'formSubmit'\n\n        $('.js-post').first().trigger 'click'\n        expect(formSubmit).toHaveBeenCalled()\n        expect($(\"form\").last().attr('action')).toEqual \"/link1/\"\n        expect($(\"form\").last().is \":visible\").toEqual false\n        expect($(\"input[name=csrfmiddlewaretoken]\").val()).toEqual \"foobar\"\n"]}