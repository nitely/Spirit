{"version":3,"file":"store-spec.js","sources":["store-spec.coffee"],"names":[],"mappings":"AAAA;EAAA,QAAA,CAAS,oBAAT,EAA+B,SAAA;AAC3B,QAAA;IAAA,QAAA,GAAW;IACX,OAAA,GAAU;IAEV,UAAA,CAAW,SAAA;AACP,UAAA;MAAA,QAAA,GAAc,OAAO,CAAC,WAAX,CAAA;MACX,QAAQ,CAAC,YAAT,GAAwB;MACxB,YAAA,CAAa,YAAb;MAEG,YAAY,CAAC,KAAhB,CAAA;MACA,QAAA,GAAW,CAAA,CAAE,aAAF,CAAgB,CAAC,KAAjB,CAAuB,WAAvB;aACX,OAAA,GAAU,QAAQ,CAAC,IAAT,CAAc,cAAd;IAPH,CAAX;IASA,EAAA,CAAG,gCAAH,EAAqC,SAAA;aACjC,MAAA,CAAO,QAAP,CAAgB,CAAC,OAAjB,CAAyB,CAAA,CAAE,aAAF,CAAzB;IADiC,CAArC;IAGA,EAAA,CAAG,6BAAH,EAAkC,SAAA;MAC9B,YAAa,CAAA,WAAA,CAAb,GAA4B;MAC5B,QAAA,GAAW,CAAA,CAAE,eAAF,CAAkB,CAAC,KAAnB,CAAyB,WAAzB;aACX,MAAA,CAAO,QAAP,CAAgB,CAAC,WAAjB,CAA6B,MAA7B;IAH8B,CAAlC;IAKA,EAAA,CAAG,qCAAH,EAA0C,SAAA;MACtC,YAAa,CAAA,WAAA,CAAb,GAA4B;MAC5B,CAAA,CAAE,MAAF,CAAS,CAAC,OAAV,CAAkB,SAAlB;aACA,MAAA,CAAO,QAAP,CAAgB,CAAC,WAAjB,CAA6B,MAA7B;IAHsC,CAA1C;IAKA,EAAA,CAAG,sCAAH,EAA2C,SAAA;MACvC,QAAQ,CAAC,GAAT,CAAa,QAAb;MACA,QAAQ,CAAC,OAAT,CAAiB,OAAjB;aACA,MAAA,CAAO,YAAa,CAAA,WAAA,CAApB,CAAiC,CAAC,OAAlC,CAA0C,QAA1C;IAHuC,CAA3C;IAKA,EAAA,CAAG,oCAAH,EAAyC,SAAA;MACrC,KAAA,CAAM,OAAN,EAAe,aAAf;MACA,QAAQ,CAAC,OAAT,CAAiB,OAAjB;aACA,MAAA,CAAO,OAAO,CAAC,WAAW,CAAC,KAAK,CAAC,KAA1B,CAAA,CAAP,CAAyC,CAAC,OAA1C,CAAkD,CAAlD;IAHqC,CAAzC;WAKA,EAAA,CAAG,wBAAH,EAA6B,SAAA;AACzB,UAAA;MAAA,YAAa,CAAA,WAAA,CAAb,GAA4B;MAC5B,cAAA,GAAiB,OAAO,CAAC,SAAR,CAAkB,gBAAlB,CAAmC,CAAC,GAAG,CAAC,WAAxC,CAAoD,KAApD;MACjB,KAAA,GAAQ,CAAA,CAAE,MAAF;MACR,KAAK,CAAC,EAAN,CAAS,QAAT,EAAmB,cAAnB;MACA,KAAK,CAAC,OAAN,CAAc,QAAd;MACA,MAAA,CAAO,WAAA,IAAe,YAAtB,CAAmC,CAAC,IAApC,CAAyC,KAAzC;aACA,MAAA,CAAO,cAAP,CAAsB,CAAC,gBAAvB,CAAA;IAPyB,CAA7B;EApC2B,CAA/B;AAAA","sourcesContent":["describe \"store plugin tests\", ->\n    textarea = null\n    storage = null\n\n    beforeEach ->\n        fixtures = do jasmine.getFixtures\n        fixtures.fixturesPath = 'base/test/fixtures/'\n        loadFixtures 'store.html'\n\n        do localStorage.clear\n        textarea = $('#my-fixture').store 'unique-id'\n        storage = textarea.data 'plugin_store'\n\n    it \"doesnt break selector chaining\", ->\n        expect(textarea).toEqual $('#my-fixture')\n\n    it \"loads previous stored value\", ->\n        localStorage['unique-id'] = \"text\"\n        textarea = $('#my-fixture-2').store 'unique-id'\n        expect(textarea).toHaveValue \"text\"\n\n    it \"updates the field on storage change\", ->\n        localStorage['unique-id'] = \"text\"\n        $(window).trigger \"storage\"\n        expect(textarea).toHaveValue \"text\"\n\n    it \"saves value to localStorage on input\", ->\n        textarea.val \"foobar\"\n        textarea.trigger 'input'\n        expect(localStorage['unique-id']).toEqual \"foobar\"\n\n    it \"wont (re)update the field on input\", ->\n        spyOn storage, 'updateField'\n        textarea.trigger 'input'\n        expect(storage.updateField.calls.count()).toEqual 0\n\n    it \"gets cleared on submit\", ->\n        localStorage['unique-id'] = \"foo\"\n        submitCallback = jasmine.createSpy('submitCallback').and.returnValue false\n        $form = $('form')\n        $form.on 'submit', submitCallback\n        $form.trigger \"submit\"\n        expect('unique-id' of localStorage).toBe false\n        expect(submitCallback).toHaveBeenCalled()\n"]}