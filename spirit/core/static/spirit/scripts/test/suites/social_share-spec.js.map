{"version":3,"file":"social_share-spec.js","sources":["social_share-spec.coffee"],"names":[],"mappings":"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","sourcesContent":["describe \"social-share plugin tests\", ->\n    social_share = null\n    SocialShare = null\n\n    beforeEach ->\n        fixtures = do jasmine.getFixtures\n        fixtures.fixturesPath = 'base/test/fixtures/'\n        loadFixtures 'social_share.html'\n\n        social_share = $('.js-share').social_share()\n        SocialShare = $.fn.social_share.SocialShare\n\n    it \"doesnt break selector chaining\", ->\n        expect(social_share).toEqual $('.js-share')\n        expect(social_share.length).toEqual 2\n\n    it \"shows the share dialog\", ->\n        expect($('.test-1').is \":visible\").toEqual false\n        social_share.first().trigger 'click'\n        expect($('.test-1').is \":visible\").toEqual true\n        expect($('.test-2').is \":visible\").toEqual false\n\n        social_share.last().trigger 'click'\n        expect($('.test-2').is \":visible\").toEqual true\n        expect($('.test-1').is \":visible\").toEqual false\n\n    it \"prevents the default click behaviour on share click\", ->\n        event = {type: 'click', stopPropagation: (->), preventDefault: (->)}\n        stopPropagation = spyOn event, 'stopPropagation'\n        preventDefault = spyOn event, 'preventDefault'\n\n        social_share.first().trigger event\n        expect(stopPropagation).toHaveBeenCalled()\n        expect(preventDefault).toHaveBeenCalled()\n\n    it \"closes the dialog\", ->\n        social_share.first().trigger 'click'\n        expect($('.test-1').is \":visible\").toEqual true\n\n        $('.test-1').find('.share-close').trigger 'click'\n        expect($('.test-1').is \":visible\").toEqual false\n\n    it \"prevents the default click behaviour on close dialog\", ->\n        event = {type: 'click', stopPropagation: (->), preventDefault: (->)}\n        stopPropagation = spyOn event, 'stopPropagation'\n        preventDefault = spyOn event, 'preventDefault'\n\n        $('.test-1').find('.share-close').trigger event\n        expect(stopPropagation).toHaveBeenCalled()\n        expect(preventDefault).toHaveBeenCalled()\n\n    it \"auto selects the share link on focus\", ->\n        social_share.first().trigger 'click'\n        $shareInput = $('.test-1').find('.share-url')\n        $shareInput.trigger 'focus'\n\n        #selection = $shareInput.val().substring $shareInput[0].selectionStart, $shareInput[0].selectionEnd\n\n        #expect(selection).toEqual \"link\"\n        #TODO: test, override SocialShare.select\n\n    it \"prevents the default behaviour on input mouseup\", ->\n        event = {type: 'mouseup', stopPropagation: (->), preventDefault: (->)}\n        stopPropagation = spyOn event, 'stopPropagation'\n        preventDefault = spyOn event, 'preventDefault'\n\n        $('.test-1').find('.share-url').trigger event\n        expect(stopPropagation).toHaveBeenCalled()\n        expect(preventDefault).toHaveBeenCalled()\n"]}