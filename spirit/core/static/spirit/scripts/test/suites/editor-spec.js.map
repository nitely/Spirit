{"version":3,"file":"editor-spec.js","sources":["editor-spec.coffee"],"names":[],"mappings":"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","sourcesContent":["describe \"editor plugin tests\", ->\n    textarea = null\n    editor = null\n\n    beforeEach ->\n        document.body.innerHTML = \"\"\"\n        <form class=\"js-reply\" action=\".\">\n            <textarea id=\"id_comment\"></textarea>\n            <div class=\"js-box-preview-content\" style=\"display:none;\"></div>\n            <ul>\n                <li><a class=\"js-box-bold\" href=\"#\" title=\"Bold\"></a></li>\n                <li><a class=\"js-box-italic\" href=\"#\" title=\"Italic\"></a></li>\n                <li><a class=\"js-box-list\" href=\"#\" title=\"List\"></a></li>\n                <li><a class=\"js-box-url\" href=\"#\" title=\"URL\"></a></li>\n                <li><a class=\"js-box-image\" href=\"#\" title=\"Image\"></a></li>\n                <li><a class=\"js-box-file\" href=\"#\" title=\"File\"></a></li>\n                <li><a class=\"js-box-poll\" href=\"#\" title=\"Poll\"></a></li>\n                <li><a class=\"js-box-preview\" href=\"#\" title=\"Preview\"></a></li>\n            </ul>\n        </form>\n        \"\"\"\n\n        editor = stModules.editor(document.querySelectorAll('.js-reply'), {\n            boldedText: \"foo bolded text\",\n            italicisedText: \"foo italicised text\",\n            listItemText: \"foo list item\",\n            linkText: \"foo link text\",\n            linkUrlText: \"foo link url\",\n            imageText: \"foo image text\",\n            imageUrlText: \"foo image url\"\n        })[0]\n        textarea = document.querySelector('textarea')\n\n    it \"adds bold\", ->\n        document.querySelector('.js-box-bold').click()\n        expect(textarea.value).toEqual(\"**foo bolded text**\")\n\n    it \"adds italic\", ->\n        document.querySelector('.js-box-italic').click()\n        expect(textarea.value).toEqual(\"*foo italicised text*\")\n\n    it \"adds list\", ->\n        document.querySelector('.js-box-list').click()\n        expect(textarea.value).toEqual(\"\\n* foo list item\")\n\n    it \"adds url\", ->\n        document.querySelector('.js-box-url').click()\n        expect(textarea.value).toEqual(\"[foo link text](foo link url)\")\n\n    it \"adds poll\", ->\n        document.querySelector('.js-box-poll').click()\n        expected = \"\\n\\n[poll name=1]\\n# Title\\n1. Description\\n2. Description\\n[/poll]\\n\"\n        expect(textarea.value).toEqual(expected)\n\n        # Increase name\n        document.querySelector('.js-box-poll').click()\n        expect(textarea.value).toEqual(\n          expected + \"\\n\\n[poll name=2]\\n# Title\\n1. Description\\n2. Description\\n[/poll]\\n\")\n\n    it \"adds image\", ->\n        document.querySelector('.js-box-image').click()\n        expect(textarea.value).toEqual(\"![foo image text](foo image url)\")\n\n    it \"adds all\", ->\n        document.querySelector('.js-box-bold').click()\n        document.querySelector('.js-box-italic').click()\n        document.querySelector('.js-box-list').click()\n        document.querySelector('.js-box-url').click()\n        document.querySelector('.js-box-image').click()\n        document.querySelector('.js-box-file').click()\n        expect(textarea.value).toEqual(\n            \"**foo bolded text***foo italicised text*\" +\n            \"\\n* foo list item[foo link text](foo link url)![foo image text](foo image url)\")\n\n    it \"wraps the selected text, bold\", ->\n        textarea.value = \"birfoobar\"\n        textarea.selectionStart = 3\n        textarea.selectionEnd = 6\n\n        document.querySelector('.js-box-bold').click()\n        expect(textarea.value).toEqual(\"bir**foo**bar\")\n\n    it \"wraps the selected text, italic\", ->\n        textarea.value = \"birfoobar\"\n        textarea.selectionStart = 3\n        textarea.selectionEnd = 6\n\n        document.querySelector('.js-box-italic').click()\n        expect(textarea.value).toEqual(\"bir*foo*bar\")\n\n    it \"wraps the selected text, list\", ->\n        textarea.value = \"birfoobar\"\n        textarea.selectionStart = 3\n        textarea.selectionEnd = 6\n\n        document.querySelector('.js-box-list').click()\n        expect(textarea.value).toEqual(\"bir\\n* foobar\")\n\n    it \"wraps the selected text, url\", ->\n        textarea.value = \"birfoobar\"\n        textarea.selectionStart = 3\n        textarea.selectionEnd = 6\n\n        document.querySelector('.js-box-url').click()\n        expect(textarea.value).toEqual(\"bir[foo](foo link url)bar\")\n\n    it \"wraps the selected text, image\", ->\n        textarea.value = \"birfoobar\"\n        textarea.selectionStart = 3\n        textarea.selectionEnd = 6\n\n        document.querySelector('.js-box-image').click()\n        expect(textarea.value).toEqual(\"bir![foo](foo image url)bar\")\n\n    # XXX marked uses module.export\n    #     instead of global/window when defined\n    ###\n    it \"shows html preview\", ->\n        textarea.value = \"*foo*\"\n        document.querySelector('.js-box-preview').click()\n        expect(textarea.style.display).toEqual('none')\n        expect(document.querySelector('.js-box-preview-content').style.display).toEqual('block')\n        expect(document.querySelector('.js-box-preview-content').innerHTML).toEqual(\n          \"<p><em>foo</em></p>\\n\")\n\n        # clicking again should hide the preview and show the textarea\n        document.querySelector('.js-box-preview').click()\n        expect(textarea.style.display).toEqual('block')\n        expect(document.querySelector('.js-box-preview-content').style.display).toEqual('none')\n    ###\n    # todo: test pointer location\n"]}