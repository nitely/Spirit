{"version":3,"file":"editor-spec.js","sources":["editor-spec.coffee"],"names":[],"mappings":"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","sourcesContent":["describe \"editor plugin tests\", ->\n    textarea = null\n    editor = null\n\n    beforeEach ->\n        fixtures = do jasmine.getFixtures\n        fixtures.fixturesPath = 'base/test/fixtures/'\n        loadFixtures 'editor.html'\n\n        textarea = $('#id_comment').editor {\n            boldedText: \"foo bolded text\",\n            italicisedText: \"foo italicised text\",\n            listItemText: \"foo list item\",\n            linkText: \"foo link text\",\n            linkUrlText: \"foo link url\",\n            imageText: \"foo image text\",\n            imageUrlText: \"foo image url\"\n        }\n        editor = textarea.data 'plugin_editor'\n\n    it \"doesnt break selector chaining\", ->\n        expect(textarea).toEqual $('#id_comment')\n        expect(textarea.length).toEqual 1\n\n    it \"adds bold\", ->\n        $('.js-box-bold').trigger 'click'\n        expect(textarea.val()).toEqual \"**foo bolded text**\"\n\n    it \"adds italic\", ->\n        $('.js-box-italic').trigger 'click'\n        expect(textarea.val()).toEqual \"*foo italicised text*\"\n\n    it \"adds list\", ->\n        $('.js-box-list').trigger 'click'\n        expect(textarea.val()).toEqual \"\\n* foo list item\"\n\n    it \"adds url\", ->\n        $('.js-box-url').trigger 'click'\n        expect(textarea.val()).toEqual \"[foo link text](foo link url)\"\n\n    it \"adds poll\", ->\n        $('.js-box-poll').trigger 'click'\n        expected = \"\\n\\n[poll name=1]\\n# Title\\n1. Description\\n2. Description\\n[/poll]\\n\"\n        expect(textarea.val()).toEqual expected\n\n        # Increase name\n        $('.js-box-poll').trigger 'click'\n        expect(textarea.val()).toEqual expected + \"\\n\\n[poll name=2]\\n# Title\\n1. Description\\n2. Description\\n[/poll]\\n\"\n\n    it \"adds image\", ->\n        $('.js-box-image').trigger 'click'\n        expect(textarea.val()).toEqual \"![foo image text](foo image url)\"\n\n    it \"adds all\", ->\n        $('.js-box-bold').trigger 'click'\n        $('.js-box-italic').trigger 'click'\n        $('.js-box-list').trigger 'click'\n        $('.js-box-url').trigger 'click'\n        $('.js-box-image').trigger 'click'\n        $('.js-box-file').trigger 'click'\n    # expect(textarea.val()).toEqual \"![foo image text](foo image url)[foo link text](foo link url)\\n* foo list item*foo italicised text***foo bolded text**\"\n\n    it \"wraps the selected text, bold\", ->\n        textarea.val \"birfoobar\"\n        textarea.first()[0].selectionStart = 3\n        textarea.first()[0].selectionEnd = 6\n\n        $('.js-box-bold').trigger 'click'\n        expect(textarea.val()).toEqual \"bir**foo**bar\"\n\n    it \"wraps the selected text, italic\", ->\n        textarea.val \"birfoobar\"\n        textarea.first()[0].selectionStart = 3\n        textarea.first()[0].selectionEnd = 6\n\n        $('.js-box-italic').trigger 'click'\n        expect(textarea.val()).toEqual \"bir*foo*bar\"\n\n    it \"wraps the selected text, list\", ->\n        textarea.val \"birfoobar\"\n        textarea.first()[0].selectionStart = 3\n        textarea.first()[0].selectionEnd = 6\n\n        $('.js-box-list').trigger 'click'\n        expect(textarea.val()).toEqual \"bir\\n* foobar\"\n\n    it \"wraps the selected text, url\", ->\n        textarea.val \"birfoobar\"\n        textarea.first()[0].selectionStart = 3\n        textarea.first()[0].selectionEnd = 6\n\n        $('.js-box-url').trigger 'click'\n        expect(textarea.val()).toEqual \"bir[foo](foo link url)bar\"\n\n    it \"wraps the selected text, image\", ->\n        textarea.val \"birfoobar\"\n        textarea.first()[0].selectionStart = 3\n        textarea.first()[0].selectionEnd = 6\n\n        $('.js-box-image').trigger 'click'\n        expect(textarea.val()).toEqual \"bir![foo](foo image url)bar\"\n\n    it \"shows html preview\", ->\n        textarea.val \"*foo*\"\n        $('.js-box-preview').trigger 'click'\n        expect(textarea.is \":visible\").toEqual false\n        expect($(\".js-box-preview-content\").is \":visible\").toEqual true\n        expect($(\".js-box-preview-content\").html()).toEqual \"<p><em>foo</em></p>\\n\"\n\n        # clicking again should hide the preview and show the textarea\n        $('.js-box-preview').trigger 'click'\n        expect(textarea.is \":visible\").toEqual true\n        expect($(\".js-box-preview-content\").is \":visible\").toEqual false\n"]}